
# ğŸŸï¸ Sistema de Bilhetagem - Case TÃ©cnico ItaÃº

Este projeto apresenta uma arquitetura em **microserviÃ§os**, com **arquitetura hexagonal** para cada serviÃ§o, utilizando uma stack moderna e prÃ¡ticas de engenharia orientadas ao **AWS Well-Architected Framework**.

A soluÃ§Ã£o foi desenvolvida como entrega para o **case tÃ©cnico ItaÃº - vaga Engenheiro(a) de Software SÃªnior**.

---

## ğŸŒŸ Arquitetura Geral

A arquitetura foi pensada para garantir:

âœ… SeparaÃ§Ã£o clara de domÃ­nios (DDD)  
âœ… Alta disponibilidade (Multi-AZ)  
âœ… Desacoplamento entre componentes (SQS)  
âœ… Escalabilidade horizontal (ECS Fargate)  
âœ… Observabilidade (CloudWatch, X-Ray)  
âœ… SeguranÃ§a (WAF, API Gateway, Cognito, IAM, Secrets Manager)  
âœ… Performance e otimizaÃ§Ã£o de custos (uso intensivo de serviÃ§os gerenciados)  

### Principais componentes:

- **AWS WAF** â†’ proteÃ§Ã£o contra ataques comuns
- **API Gateway** â†’ gestÃ£o de APIs REST
- **Amazon Cognito** â†’ autenticaÃ§Ã£o OAuth2 + JWT
- **ECS Fargate** â†’ execuÃ§Ã£o de containers em subnets privadas
- **RDS PostgreSQL (Multi-AZ)** â†’ banco relacional transacional
- **Amazon SQS** â†’ mensageria para orquestraÃ§Ã£o entre serviÃ§os
- **Amazon S3** â†’ armazenamento de ingressos em PDF
- **CloudWatch + X-Ray + IAM + Secrets Manager** â†’ observabilidade e seguranÃ§a

### Topologia de rede:

- Subnets pÃºblicas: WAF, API Gateway, Cognito  
- Subnets privadas: ECS tasks e RDS  
- MÃºltiplas zonas de disponibilidade (AZs)

---

## ğŸ§± ServiÃ§os

Todos os serviÃ§os seguem **Clean Architecture**, **SOLID** e **12 Factors**, com:

- DomÃ­nio isolado da infraestrutura
- ValidaÃ§Ãµes e seguranÃ§a OWASP
- IntegraÃ§Ã£o por REST e mensageria (SQS)
- APIs documentadas em OpenAPI (Swagger)

### Microservices:

- **user-service**: CRUD de usuÃ¡rios
- **event-service**: CRUD de eventos
- **product-service**: Produtos complementares (pipoca, chocolate...)
- **ticket-service**: Controle de ingressos e geraÃ§Ã£o de PDF
- **reservation-service**: Reservas com expiraÃ§Ã£o automÃ¡tica (scheduler)
- **order-service**: FinalizaÃ§Ã£o de pedidos e confirmaÃ§Ã£o de reservas
- **payment-service**: Processamento de pagamentos (simulado)

---

## ğŸ—ºï¸ Fluxo de Compra

1ï¸âƒ£ UsuÃ¡rio e evento sÃ£o cadastrados  
2ï¸âƒ£ Tickets sÃ£o cadastrados para o evento  
3ï¸âƒ£ Reserva de ingressos Ã© feita (temporÃ¡ria, com expiraÃ§Ã£o)  
4ï¸âƒ£ Produtos complementares podem ser adicionados ao pedido  
5ï¸âƒ£ Pedido Ã© finalizado:
   - Ordem Ã© criada
   - Reserva Ã© confirmada
   - Pagamento Ã© processado (mock)
   - Ticket em PDF Ã© gerado e armazenado em S3

---

## âš™ï¸ Como rodar o projeto

### Localmente (SQLite ou PostgreSQL via Docker)

```bash
# Instalar dependÃªncias
make prepare

# Rodar com banco SQLite (rÃ¡pido para testes)
make run_local

# Rodar com PostgreSQL (via Docker Compose)
docker-compose up --build
```

### ProduÃ§Ã£o (AWS Fargate + RDS Multi-AZ)

```bash
# Build e push das imagens
make build
make push

# Deploy para ECS (via GitHub Actions ou scripts)
bash scripts/deploy.sh
```

---

## ğŸ“‹ Boas prÃ¡ticas adotadas

- **AWS Well-Architected Framework** (seguranÃ§a, confiabilidade, performance, eficiÃªncia de custos, excelÃªncia operacional)
- Clean Architecture + SOLID + 12 Factors
- OWASP Top 10 â€” proteÃ§Ã£o contra vulnerabilidades
- Logging e tracing distribuÃ­do com CloudWatch e X-Ray
- OrquestraÃ§Ã£o desacoplada com SQS
- GestÃ£o segura de segredos com AWS Secrets Manager
- Uso de mÃºltiplas AZs e serviÃ§os gerenciados para alta disponibilidade

---

## ğŸ“ DocumentaÃ§Ã£o complementar

- [Decisions.md](docs/decidions.md) â€” decisÃµes tÃ©cnicas detalhadas
- Arquitetura visual: `Arquitetura Bilhetagem.drawio` (disponÃ­vel para ediÃ§Ã£o em diagrams.net)

---
